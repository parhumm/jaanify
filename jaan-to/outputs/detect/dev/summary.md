---
title: "Jaanify — Engineering Audit Summary (Light)"
id: "AUDIT-2026-002"
version: "1.0.0"
status: draft
date: 2026-02-11
target:
  name: "jaanify"
  platform: "all"
  commit: "8126aac6ed94a5abaa0ad2bd7d29e12c33275ef9"
  branch: "main"
tool:
  name: "detect-dev"
  version: "1.0.0"
  rules_version: "2024.1"
confidence_scheme: "four-level"
findings_summary:
  critical: 0
  high: 0
  medium: 3
  low: 3
  informational: 6
overall_score: 9.9
lifecycle_phase: post-build
---

# Jaanify — Engineering Audit Summary

> Generated by jaan.to detect-dev (light mode) | 2026-02-11
> Target: Full repository (monorepo — apps/web + apps/api + packages)
> Score: **9.9/10** (OpenSSF-style, Layers 1-2 only)

---

## Executive Summary

Jaanify is a **Turborepo + pnpm monorepo** containing two applications (`apps/web`, `apps/api`) and one shared package (`packages/typescript-config`). The stack is modern and well-structured: **Fastify v5** backend with **Prisma v6** ORM on **PostgreSQL 16**, and a **Next.js 15 + React 19** frontend with **TailwindCSS v4** and **Zustand v5** state management. Docker support includes multi-stage builds with security hardening (non-root users, healthchecks, alpine images).

No critical or high-severity issues were detected at the config/container layers. Three medium findings relate to a missing lock file, absent test configuration files, and hardcoded development secrets in docker-compose. Three low findings cover incomplete linting setup and use of an experimental compiler feature.

---

## Scope and Methodology

| Aspect | Detail |
|--------|--------|
| **Scope** | Full repository: `apps/api`, `apps/web`, `packages/typescript-config`, Docker configs |
| **Mode** | Light — Layers 1-2 (config manifests + container definitions) |
| **Exclusions** | CI/CD, infrastructure, observability, deployment, code-level security (requires `--full`) |
| **Method** | Manifest analysis (package.json, tsconfig, prisma schema, docker-compose, Dockerfiles) |
| **Platforms** | Multi-platform monorepo: web (apps/web), backend (apps/api), shared (packages/) |

---

## Tech Stack

| Category | Technology | Version | Platform | Confidence | Evidence |
|----------|-----------|---------|----------|------------|----------|
| Runtime | Node.js | >=22.0.0 | all | Confirmed (0.98) | `engines` field in `apps/api/package.json`, `apps/web/package.json` |
| Language | TypeScript | ^5.6–5.7 | all | Confirmed (0.98) | `devDependencies` in both app `package.json` files |
| Backend Framework | Fastify | ^5.7.0 | backend | Confirmed (0.98) | `dependencies` in `apps/api/package.json` |
| Frontend Framework | Next.js + React | ^15.0 + ^19.0 | web | Confirmed (0.98) | `dependencies` in `apps/web/package.json` |
| ORM | Prisma | ^6.0.0 | backend | Confirmed (0.98) | `@prisma/client` in deps + `prisma/schema.prisma` |
| State Management | Zustand | ^5.0.0 | web | Confirmed (0.98) | `dependencies` in `apps/web/package.json` |
| Data Fetching | TanStack React Query | ^5.60.0 | web | Confirmed (0.98) | `@tanstack/react-query` in deps |
| Styling | TailwindCSS | ^4.0.0 | web | Confirmed (0.98) | `devDependencies` in `apps/web/package.json` |
| Validation | Zod | ^3.24.0 | all | Confirmed (0.98) | `dependencies` in both app `package.json` files |
| API Docs | Fastify Swagger | ^9.0.0 | backend | Confirmed (0.98) | `@fastify/swagger` + `@fastify/swagger-ui` in deps |
| Monorepo | Turborepo | ^2.4.0 | all | Confirmed (0.98) | `turbo.json` + root `devDependencies` |
| Package Manager | pnpm | 9.15.0 | all | Confirmed (0.98) | `packageManager` field in root `package.json` |
| Unit Testing | Vitest | ^2.0.0 | all | Confirmed (0.95) | `devDependencies` in both app `package.json` files |
| E2E Testing | Playwright | ^1.50.0 | web | Confirmed (0.95) | `@playwright/test` in `apps/web/package.json` |
| Component Testing | Testing Library | ^16.0.0 | web | Confirmed (0.95) | `@testing-library/react` in deps |
| Linting | ESLint | ^9.0.0 | all | Confirmed (0.95) | `devDependencies` + `eslint.config.mjs` (web) |
| Formatting | Prettier | ^3.4.0 | web | Confirmed (0.95) | `devDependencies` in `apps/web/package.json` |
| Accessibility | eslint-plugin-jsx-a11y | ^6.10.0 | web | Confirmed (0.95) | ESLint plugin in `apps/web/eslint.config.mjs` |
| URL State | nuqs | ^2.5.0 | web | Confirmed (0.98) | `dependencies` in `apps/web/package.json` |
| HTTP Client | Axios | ^1.7.0 | web | Confirmed (0.98) | `dependencies` in `apps/web/package.json` |
| Theming | next-themes | ^0.4.0 | web | Confirmed (0.98) | `dependencies` in `apps/web/package.json` |

---

## Database & Container

| Service | Technology | Version | Source | Confidence |
|---------|-----------|---------|--------|------------|
| Primary DB | PostgreSQL | 16-alpine | `docker-compose.yml` image tag | Firm (0.90) |
| Cache | Redis | 7-alpine | `docker-compose.yml` image tag | Firm (0.90) |
| API Container | Node.js | 22-alpine | `Dockerfile.api` base image | Confirmed (0.95) |
| Web Container | Node.js | 22-alpine | `Dockerfile.web` base image | Confirmed (0.95) |

### Prisma Schema (7 models)

| Model | Key Features |
|-------|-------------|
| User | UUID PK, soft-delete, JSONB preferences, Google OAuth + guest auth |
| Task | UUID PK, soft-delete, AI priority scoring (Decimal 5,4), JSONB reasoning |
| DailyPlan | One-per-user-per-day unique constraint, AI/manual reasoning methods |
| DailyPlanSlot | Ordered position within plan, cascade deletes from plan |
| UserFeedback | Polymorphic (task or plan), SetNull on reference deletion |
| GuestSession | TTL-based expiry index, anonymous ID, JSONB data storage |
| AuditLog | Entity-type polymorphic, JSONB metadata, indexed by entity + user |

### Docker Architecture

- **Multi-stage builds** (deps → build → runtime) for both API and web
- **Security hardening**: non-root users (`fastify:nodejs`, `nextjs:nodejs`)
- **Healthchecks**: PostgreSQL (`pg_isready`), Redis (`redis-cli ping`), API (`/v1/health`), Web (`/`)
- **Next.js standalone output** for minimal web image
- **pnpm deploy --prod** pruning for API production image
- **Docker Compose profiles**: `backend`, `frontend`, `full`, `default`

---

## Findings

### E-DEV-001 — Missing pnpm Lock File (Medium)

**Severity:** Medium | **Confidence:** Firm (0.85)

```yaml
evidence:
  id: E-DEV-001
  type: absence
  confidence: 0.85
  location:
    uri: "pnpm-lock.yaml"
    snippet: "File not found in repository; not listed in .gitignore"
  method: manifest-analysis
```

**Description:** No `pnpm-lock.yaml` exists in the repository. It is not listed in `.gitignore`, indicating it was never generated rather than intentionally excluded.

**Impact:** Builds are not reproducible. Different developers or CI runs may resolve different dependency versions. Docker builds using `--frozen-lockfile` will fail.

**Remediation:** Run `pnpm install` and commit the generated `pnpm-lock.yaml`.

---

### E-DEV-002 — Missing Test Configuration Files (Medium)

**Severity:** Medium | **Confidence:** Firm (0.85)

```yaml
evidence:
  id: E-DEV-002
  type: absence
  confidence: 0.85
  location:
    uri: "apps/{api,web}/vitest.config.*, apps/web/playwright.config.*"
    snippet: "No vitest.config or playwright.config files found in either app"
  method: pattern-match
```

**Description:** Both apps declare Vitest test scripts and `apps/web` declares Playwright E2E scripts in `package.json`. However, no `vitest.config.*` or `playwright.config.*` files exist.

**Impact:** Tests may run with defaults but lack framework-specific configuration (coverage thresholds, test environment, browser config). Playwright typically requires a config file to function.

**Remediation:** Add `vitest.config.ts` to both `apps/api` and `apps/web`, and `playwright.config.ts` to `apps/web`.

---

### E-DEV-003 — Docker Compose Hardcoded Development Secrets (Medium)

**Severity:** Medium | **Confidence:** Confirmed (0.95)

```yaml
evidence:
  id: E-DEV-003
  type: config-pattern
  confidence: 0.95
  location:
    uri: "jaan-to/outputs/devops/infra-scaffold/01-jaanify-mvp/docker/docker-compose.yml"
    startLine: 63
    endLine: 64
    snippet: |
      JWT_SECRET: dev-jwt-secret-at-least-32-characters-long
      REFRESH_TOKEN_SECRET: dev-refresh-secret-at-least-32-characters
  method: manual-review
```

**Description:** JWT and refresh token secrets are hardcoded as plaintext in the docker-compose file, which is committed to a **public repository**. While clearly marked as development values, this establishes a pattern that may propagate.

**Impact:** Low immediate risk (dev-only values). Pattern risk if docker-compose is reused in non-dev environments.

**Remediation:** Use required env var substitution: `JWT_SECRET: ${JWT_SECRET:?Set JWT_SECRET in .env}`.

---

### E-DEV-004 — Missing ESLint Configuration for API (Low)

**Severity:** Low | **Confidence:** Firm (0.80)

```yaml
evidence:
  id: E-DEV-004
  type: absence
  confidence: 0.80
  location:
    uri: "apps/api/"
    snippet: "No eslint.config.* or .eslintrc.* found in apps/api/"
  method: pattern-match
```

**Description:** `apps/api/package.json` defines a `lint` script (`eslint src/`) but no ESLint configuration file exists. ESLint 9+ requires a flat config file to run.

**Remediation:** Add `eslint.config.mjs` to `apps/api/` with TypeScript and Node.js rules.

---

### E-DEV-005 — No Root Prettier or EditorConfig (Low)

**Severity:** Low | **Confidence:** Firm (0.80)

```yaml
evidence:
  id: E-DEV-005
  type: absence
  confidence: 0.80
  location:
    uri: ".prettierrc.*, .editorconfig"
    snippet: "No formatting config found at repository root"
  method: pattern-match
```

**Description:** Prettier is a devDependency in `apps/web` but no `.prettierrc` or `.editorconfig` exists at root level. In a monorepo, root-level formatting config ensures consistent style across all packages.

**Remediation:** Add `.prettierrc` and `.editorconfig` at the repository root.

---

### E-DEV-006 — Experimental React Compiler Enabled (Low)

**Severity:** Low | **Confidence:** Confirmed (0.95)

```yaml
evidence:
  id: E-DEV-006
  type: config-pattern
  confidence: 0.95
  location:
    uri: "apps/web/next.config.ts"
    startLine: 5
    endLine: 7
    snippet: |
      experimental: {
        reactCompiler: true,
      },
  method: manifest-analysis
```

**Description:** The React Compiler is enabled via `experimental.reactCompiler` in Next.js config. This feature automatically optimizes components but remains behind the experimental flag in Next.js 15.

**Impact:** May introduce unexpected rendering behavior in edge cases. Monitor for regressions.

**Remediation:** Acceptable for development. Consider gating behind environment check if stability issues arise.

---

### E-DEV-007 — Turborepo Monorepo with Proper Task Graph (Informational)

```yaml
evidence:
  id: E-DEV-007
  type: config-pattern
  confidence: 0.98
  location:
    uri: "turbo.json"
    snippet: "tasks: { build: { dependsOn: ['^build'] }, ... }"
  method: manifest-analysis
```

Well-configured Turborepo with build dependency graph, cache management, and dedicated database tasks (`db:generate`, `db:push`, `db:migrate:dev`).

---

### E-DEV-008 — pnpm Workspaces Structure (Informational)

```yaml
evidence:
  id: E-DEV-008
  type: config-pattern
  confidence: 0.98
  location:
    uri: "pnpm-workspace.yaml"
    snippet: "packages: ['apps/*', 'packages/*']"
  method: manifest-analysis
```

Standard pnpm workspace layout with `apps/*` and `packages/*` globs.

---

### E-DEV-009 — Fastify Plugin Ecosystem (Informational)

```yaml
evidence:
  id: E-DEV-009
  type: dependency
  confidence: 0.98
  location:
    uri: "apps/api/package.json"
    snippet: "@fastify/autoload, @fastify/cors, @fastify/cookie, @fastify/sensible, @fastify/swagger, @fastify/swagger-ui"
  method: manifest-analysis
```

Comprehensive Fastify plugin usage: autoload for route registration, CORS, cookies, error handling (sensible), and OpenAPI documentation (swagger + UI).

---

### E-DEV-010 — TypeScript Strict Mode Enabled (Informational)

```yaml
evidence:
  id: E-DEV-010
  type: config-pattern
  confidence: 0.98
  location:
    uri: "apps/api/tsconfig.json, apps/web/tsconfig.json"
    snippet: "\"strict\": true"
  method: manifest-analysis
```

Both platforms use `strict: true` TypeScript compilation, ensuring maximum type safety.

---

### E-DEV-011 — Zod Type Provider Integration (Informational)

```yaml
evidence:
  id: E-DEV-011
  type: dependency
  confidence: 0.98
  location:
    uri: "apps/api/package.json"
    snippet: "\"fastify-type-provider-zod\": \"^6.1.0\""
  method: manifest-analysis
```

Backend uses Zod type provider for Fastify, enabling runtime validation with compile-time type inference across request/response schemas.

---

### E-DEV-012 — Prisma fullTextSearch Preview Feature (Informational)

```yaml
evidence:
  id: E-DEV-012
  type: config-pattern
  confidence: 0.95
  location:
    uri: "apps/api/prisma/schema.prisma"
    startLine: 3
    snippet: "previewFeatures = [\"fullTextSearch\"]"
  method: manifest-analysis
```

Prisma schema enables `fullTextSearch` preview feature, stable for PostgreSQL but still flagged as preview in Prisma v6.

---

## Recommendations (Priority Order)

| # | Finding | Severity | Effort | Action |
|---|---------|----------|--------|--------|
| 1 | E-DEV-001 | Medium | Low | Run `pnpm install` and commit `pnpm-lock.yaml` |
| 2 | E-DEV-002 | Medium | Low | Add `vitest.config.ts` (both apps) and `playwright.config.ts` (web) |
| 3 | E-DEV-003 | Medium | Low | Replace hardcoded secrets with `${VAR:?message}` syntax |
| 4 | E-DEV-004 | Low | Low | Add `eslint.config.mjs` to `apps/api/` |
| 5 | E-DEV-005 | Low | Low | Add `.prettierrc` + `.editorconfig` at repo root |
| 6 | E-DEV-006 | Low | — | Monitor React Compiler stability; no action needed now |

---

## Score Disclaimer

**Score: 9.9/10** — Based on config + container layers only (Layers 1-2). This score reflects the absence of critical and high-severity issues in manifest files and Docker configuration. It does **not** assess code-level security, CI/CD pipeline security, or runtime behavior.

Run with `--full` for complete engineering audit including:
- CI/CD pipeline security (secrets, permissions, action pinning)
- Code-level security posture (OWASP mapping, auth flow analysis)
- Infrastructure patterns (deployment, cloud config)
- Observability (logging, metrics, tracing)
- Technical risk and debt assessment

**Score formula:** `10 - (0×2.0 + 0×1.0 + 3×0.4 + 3×0.1) / max(12, 1)` = `10 - 1.5/12` = **9.9**

---

## Metadata

| Field | Value |
|-------|-------|
| Generated | 2026-02-11 |
| Skill | jaan-to:detect-dev v1.0.0 |
| Mode | Light (Layers 1-2) |
| Platforms | all (monorepo: web + backend + shared) |
| Output Path | jaan-to/outputs/detect/dev/summary.md |
| Previous Run | AUDIT-2026-001 (2026-02-09, scaffold-only, score 6.1/10) |
| Status | Draft |

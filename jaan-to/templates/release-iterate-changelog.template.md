# Changelog Output Template

> Template for `$JAAN_OUTPUTS_DIR/CHANGELOG.md` — follows [Keep a Changelog](https://keepachangelog.com/en/1.1.0/) standard.

---

## New Changelog (create mode)

Use this template when creating a new CHANGELOG.md from scratch:

```markdown
# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

{If initial entries provided, add them under appropriate ### headers}

{If initial version provided:}
## [{{version}}] - {{date}}

### Added

- Initial release with {{features_summary}}.

{If repo URL provided:}
[unreleased]: {{repo_url}}/compare/v{{version}}...HEAD
[{{version}}]: {{repo_url}}/releases/tag/v{{version}}
```

---

## Version Section (release mode)

Insert this between `[Unreleased]` and the previous latest version:

```markdown
## [{{version}}] - {{date}}

### Added
{{added_entries}}

### Changed
{{changed_entries}}

### Deprecated
{{deprecated_entries}}

### Removed
{{removed_entries}}

### Fixed
{{fixed_entries}}

### Security
{{security_entries}}
```

**Rules**:
- Only include sections that have entries (omit empty categories)
- Each entry starts with `- ` (dash space)
- Entries use human-friendly language, not raw commit messages
- Date format: YYYY-MM-DD (ISO 8601)

---

## Unreleased Entry (add / auto-generate mode)

Append entries under the correct sub-header in `[Unreleased]`:

```markdown
## [Unreleased]

### Added
- {{new_entry}}

### Changed
- {{changed_entry}}

### Fixed
- {{fixed_entry}}
```

**Rules**:
- Create missing sub-headers as needed
- Preserve existing entries — append, don't overwrite
- Keep sub-headers in standard order: Added, Changed, Deprecated, Removed, Fixed, Security

---

## Comparison Links (footer)

Update footer links when releasing a new version:

```markdown
[unreleased]: {{repo_url}}/compare/v{{new_version}}...HEAD
[{{new_version}}]: {{repo_url}}/compare/v{{previous_version}}...v{{new_version}}
[{{previous_version}}]: {{repo_url}}/compare/v{{older_version}}...v{{previous_version}}
```

For first release:
```markdown
[unreleased]: {{repo_url}}/compare/v{{version}}...HEAD
[{{version}}]: {{repo_url}}/releases/tag/v{{version}}
```

---

## User Impact Report Section

When generating a changelog draft (Phase 1 HARD STOP), include this impact analysis:

```markdown
## User Impact Notes

### High Impact
{Changes requiring user attention or action — breaking changes, removed features, security fixes needing user response}

### Medium Impact
{Notable changes users should know about — new features, significant improvements, deprecation notices}

### Low Impact
{Minor improvements, no action needed — bug fixes, performance improvements, small UI changes}
```

---

## Support Guidance Section

Include support-relevant notes for the downstream `support-help-article` skill:

```markdown
## Support Guidance

### FAQ Updates Needed
- {Questions users might ask about changes}

### Known Issues
- {Any known issues introduced or remaining}

### Migration Steps
- {Steps users need to take for breaking changes}

### Suggested Help Articles
- {Topics that should be documented for support}
```

---

## Skipped Commits Section

Track filtered commits for transparency:

```markdown
## Skipped Commits

| Commit | Message | Reason |
|--------|---------|--------|
| {{hash_short}} | {{message}} | {{reason}} |
```

Reasons: docs-only, test-only, CI/build, chore, config-only

---

## Metadata Footer

```markdown
---

> Generated by jaan.to | {{date}} | Skill: release-iterate-changelog | Mode: {{source_mode}} | Status: Draft
```
